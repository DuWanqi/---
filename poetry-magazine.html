<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Êé¨ÊúàËØóÈõÜ - ÁîµÂ≠êËØóÂàä</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@200;300;400;500;600;700;900&family=ZCOOL+XiaoWei&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
    <style>
        :root {
            --primary: #8B4513;
            --primary-light: #A0522D;
            --seal-red: #b93a32;
            --bg-warm: #d4c5a9;
            --bg-dark: #2c241b;
            --paper: #f7f1e3;
            --paper-dark: #ebe4d3;
            --ink: #2c241b;
            --ink-light: #5d554a;
            --gold: #c9a227;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Serif SC', 'ZCOOL XiaoWei', serif;
            background: linear-gradient(135deg, var(--bg-warm) 0%, #c4b494 50%, var(--bg-warm) 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
        }

        /* ===== È°∂ÈÉ®ÂØºËà™Ê†è ===== */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(to bottom, rgba(212, 197, 169, 0.95), transparent);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            color: var(--ink);
            cursor: pointer;
            transition: color 0.3s;
        }

        .logo:hover {
            color: var(--seal-red);
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            border: 2px solid currentColor;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .logo-text {
            font-size: 1.25rem;
            font-weight: 700;
            letter-spacing: 0.2em;
        }

        .nav-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .nav-btn {
            background: rgba(255,255,255,0.5);
            border: 1px solid rgba(0,0,0,0.1);
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            cursor: pointer;
            font-family: inherit;
            font-size: 0.875rem;
            color: var(--ink);
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-btn:hover {
            background: var(--seal-red);
            color: white;
            border-color: var(--seal-red);
        }

        /* ===== ‰∏ªÂÆπÂô® ===== */
        .main-container {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 5rem 1rem 2rem;
            perspective: 2000px;
        }

        /* ===== ‰π¶Êú¨ÂÆπÂô® ===== */
        .book-wrapper {
            position: relative;
            width: 100%;
            max-width: 1200px;
            height: 80vh;
            max-height: 700px;
        }

        .book {
            position: relative;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            display: flex;
            justify-content: center;
        }

        /* ===== ‰π¶ËÑä ===== */
        .book-spine {
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 30px;
            transform: translateX(-50%);
            background: linear-gradient(90deg, 
                rgba(44, 36, 27, 0.15) 0%, 
                rgba(44, 36, 27, 0.05) 30%,
                rgba(255, 255, 255, 0.05) 50%,
                rgba(44, 36, 27, 0.05) 70%,
                rgba(44, 36, 27, 0.15) 100%
            );
            z-index: 50;
            pointer-events: none;
        }

        /* ===== È°µÈù¢ÂÆπÂô® ===== */
        .pages-container {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            transform-style: preserve-3d;
        }

        /* ===== Âçï‰∏™ÁøªÈ°µ ===== */
        .page-spread {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            transform-style: preserve-3d;
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.4s;
            pointer-events: none;
        }

        .page-spread.active {
            pointer-events: auto;
        }

        .page-spread.flipped {
            z-index: 10;
        }

        /* ===== Â∑¶Âè≥È°µÈù¢ ===== */
        .page {
            width: 50%;
            height: 100%;
            background: var(--paper);
            position: relative;
            overflow: hidden;
            transform-style: preserve-3d;
            backface-visibility: hidden;
        }

        .page-left {
            border-radius: 4px 0 0 4px;
            box-shadow: 
                inset -20px 0 40px -10px rgba(44, 36, 27, 0.08),
                -5px 0 15px rgba(0,0,0,0.1);
            border-right: 1px solid rgba(44, 36, 27, 0.1);
        }

        .page-right {
            border-radius: 0 4px 4px 0;
            box-shadow: 
                inset 20px 0 40px -10px rgba(44, 36, 27, 0.08),
                5px 0 15px rgba(0,0,0,0.1);
            border-left: 1px solid rgba(44, 36, 27, 0.1);
        }

        /* Á∫∏Âº†Á∫πÁêÜ */
        .page::before {
            content: '';
            position: absolute;
            inset: 0;
            background: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%' height='100%' filter='url(%23noise)'/%3E%3C/svg%3E");
            opacity: 0.03;
            pointer-events: none;
        }

        /* ===== Â∞ÅÈù¢Ê†∑Âºè ===== */
        .cover-page {
            background: linear-gradient(135deg, #c4a574 0%, #a08060 50%, #c4a574 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 3rem;
            position: relative;
        }

        .cover-page::before {
            content: '';
            position: absolute;
            inset: 0;
            background: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.6' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%' height='100%' filter='url(%23noise)'/%3E%3C/svg%3E");
            opacity: 0.08;
            pointer-events: none;
        }

        .cover-decoration {
            position: absolute;
            bottom: 10%;
            left: 5%;
            right: 5%;
            height: 40%;
            opacity: 0.15;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: bottom center;
            filter: grayscale(100%) sepia(20%);
        }

        .cover-title-vertical {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.5rem;
            position: relative;
            z-index: 1;
            text-align: center;
        }

        .cover-main-title {
            font-size: clamp(2.5rem, 6vw, 4rem);
            font-weight: 900;
            color: var(--ink);
            letter-spacing: 0.4em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .cover-subtitle {
            font-size: clamp(0.875rem, 2vw, 1.125rem);
            color: var(--ink-light);
            letter-spacing: 0.15em;
            padding-top: 1.5rem;
            border-top: 2px solid var(--seal-red);
        }

        .cover-seal {
            position: absolute;
            bottom: 2rem;
            left: 2rem;
            width: 60px;
            height: 60px;
            border: 3px solid var(--seal-red);
            border-radius: 4px;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            grid-template-rows: repeat(2, 1fr);
            padding: 4px;
            background: rgba(185, 58, 50, 0.05);
            transform: rotate(3deg);
            z-index: 1;
        }

        .cover-seal span {
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--seal-red);
            font-size: 0.75rem;
            font-weight: 700;
        }

        /* ===== ÁõÆÂΩïÈ°µÊ†∑Âºè ===== */
        .toc-page {
            padding: 3rem;
            display: flex;
            flex-direction: column;
        }

        .toc-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--ink);
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--seal-red);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .toc-list {
            flex: 1;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .toc-item {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid transparent;
        }

        .toc-item:hover {
            background: rgba(185, 58, 50, 0.05);
            border-color: rgba(185, 58, 50, 0.2);
        }

        .toc-number {
            width: 2rem;
            font-size: 0.875rem;
            color: var(--seal-red);
            font-weight: 600;
        }

        .toc-poem-title {
            flex: 1;
            font-size: 1rem;
            color: var(--ink);
        }

        .toc-author {
            font-size: 0.875rem;
            color: var(--ink-light);
        }

        /* ===== ËØóËØçÈ°µÈù¢Ê†∑Âºè ===== */
        .poem-page {
            padding: 1.5rem 2rem;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .poem-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 0.75rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid rgba(44, 36, 27, 0.1);
        }

        .poem-author-tag {
            font-size: 0.875rem;
            color: var(--ink-light);
            font-weight: 500;
            letter-spacing: 0.1em;
        }

        .poem-content-area {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow-y: auto;
            padding: 1rem 0;
        }

        .poem-vertical-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            gap: 0.75rem;
            height: 100%;
            text-align: center;
        }

        .poem-title-block {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.25rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid rgba(185, 58, 50, 0.3);
        }

        .poem-title {
            font-size: clamp(1.75rem, 4vw, 2.5rem);
            font-weight: 900;
            color: var(--ink);
            letter-spacing: 0.25em;
        }

        .poem-author-block {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 0.5rem;
        }

        .poem-author {
            font-size: 1.125rem;
            color: var(--seal-red);
            font-weight: 600;
            letter-spacing: 0.2em;
        }

        .poem-time {
            font-size: 0.8125rem;
            color: var(--ink-light);
            font-weight: 400;
            letter-spacing: 0.05em;
            opacity: 0.7;
        }

        .poet-seal {
            width: 28px;
            height: 28px;
            border: 2px solid var(--seal-red);
            border-radius: 2px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.625rem;
            color: var(--seal-red);
            font-weight: 700;
            background: rgba(185, 58, 50, 0.05);
        }

        .poem-lines {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            align-items: center;
        }

        .poem-line {
            font-size: clamp(1.1rem, 2.5vw, 1.35rem);
            color: var(--ink-light);
            letter-spacing: 0.15em;
            line-height: 1.6;
            transition: color 0.3s;
            cursor: default;
        }

        .poem-line:hover {
            color: var(--ink);
        }

        .page-number {
            position: absolute;
            bottom: 1.5rem;
            font-size: 0.875rem;
            color: var(--ink-light);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .page-number-left {
            left: 2rem;
        }

        .page-number-right {
            right: 2rem;
        }

        .page-number::before,
        .page-number::after {
            content: '';
            width: 1.5rem;
            height: 1px;
            background: rgba(44, 36, 27, 0.2);
        }

        /* ===== Ê≥®ÈáäÈ°µÈù¢Ê†∑Âºè ===== */
        .annotation-page {
            padding: 2.5rem;
            display: flex;
            flex-direction: column;
            background: linear-gradient(135deg, var(--paper) 0%, var(--paper-dark) 100%);
            position: relative;
        }

        .annotation-bg-image {
            position: absolute;
            inset: 0;
            background-size: cover;
            background-position: center;
            opacity: 0.15;
            filter: grayscale(100%) sepia(20%);
        }

        .annotation-content {
            position: relative;
            z-index: 1;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .annotation-header {
            display: flex;
            justify-content: flex-end;
            margin-bottom: 1.5rem;
        }

        .annotation-meta {
            text-align: right;
        }

        .annotation-author-tag {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            background: rgba(255,255,255,0.8);
            border: 1px solid rgba(44, 36, 27, 0.1);
            font-size: 0.75rem;
            font-weight: 500;
            color: var(--ink-light);
            letter-spacing: 0.05em;
            border-radius: 2px;
        }

        .annotation-card {
            background: rgba(252, 250, 247, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(214, 207, 194, 0.8);
            border-radius: 8px;
            padding: 1.5rem;
            padding-bottom: 5rem;
            margin-top: auto;
            box-shadow: 0 10px 30px rgba(44, 36, 27, 0.1);
            max-height: 45vh;
            overflow-y: auto;
        }

        .annotation-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .annotation-card-title {
            font-size: 1rem;
            font-weight: 700;
            color: var(--ink);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .annotation-card-title .material-symbols-outlined {
            color: var(--seal-red);
            font-size: 1.25rem;
        }

        .annotation-card-actions {
            display: flex;
            gap: 0.5rem;
        }

        .annotation-card-actions button {
            background: none;
            border: none;
            padding: 0.375rem;
            cursor: pointer;
            color: var(--ink-light);
            transition: color 0.3s;
            border-radius: 4px;
        }

        .annotation-card-actions button:hover {
            color: var(--ink);
            background: rgba(0,0,0,0.05);
        }

        .explore-icon-btn {
            color: var(--seal-red) !important;
        }

        .explore-icon-btn:hover {
            background: rgba(185, 58, 50, 0.1) !important;
        }

        .annotation-text {
            font-size: 0.9375rem;
            line-height: 1.8;
            color: var(--ink-light);
            border-left: 3px solid rgba(185, 58, 50, 0.3);
            padding-left: 1rem;
            margin-bottom: 1.25rem;
        }

        .annotation-section {
            margin-bottom: 1rem;
        }

        .annotation-section-title {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--seal-red);
            letter-spacing: 0.1em;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .annotation-section-title::after {
            content: '';
            flex: 1;
            height: 1px;
            background: rgba(185, 58, 50, 0.2);
        }

        .annotation-notes {
            font-size: 0.875rem;
            line-height: 1.7;
            color: var(--ink-light);
        }

        .annotation-note-item {
            margin-bottom: 0.5rem;
            padding-left: 1rem;
            position: relative;
        }

        .annotation-note-item::before {
            content: '‚Ä¢';
            position: absolute;
            left: 0;
            color: var(--seal-red);
        }

        .annotation-note-more {
            color: var(--seal-red);
            font-size: 0.8125rem;
            font-style: italic;
            opacity: 0.8;
            margin-top: 0.5rem;
            padding-top: 0.5rem;
            border-top: 1px dashed rgba(139, 69, 19, 0.2);
        }

        .annotation-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(0,0,0,0.05);
        }

        .annotation-footer-link {
            font-size: 0.75rem;
            color: var(--ink-light);
            text-decoration: none;
            transition: color 0.3s;
        }

        .annotation-footer-link:hover {
            color: var(--ink);
        }

        .annotation-explore-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--seal-red);
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            transition: gap 0.3s;
        }

        .annotation-explore-btn:hover {
            gap: 0.75rem;
        }

        /* ===== ÁøªÈ°µÊåâÈíÆ ===== */
        .page-navigation {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            gap: 1.5rem;
            background: rgba(255,255,255,0.9);
            backdrop-filter: blur(10px);
            padding: 0.75rem 1.5rem;
            border-radius: 3rem;
            box-shadow: 0 10px 40px rgba(44, 36, 27, 0.15);
            border: 1px solid rgba(214, 207, 194, 0.5);
            z-index: 100;
        }

        .page-nav-btn {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: var(--paper);
            border: 1px solid rgba(214, 207, 194, 0.8);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--ink);
            transition: all 0.3s;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .page-nav-btn:hover:not(:disabled) {
            background: var(--seal-red);
            color: white;
            border-color: var(--seal-red);
            transform: scale(1.05);
        }

        .page-nav-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .page-indicator {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.375rem;
        }

        .page-indicator-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--ink);
            letter-spacing: 0.05em;
            max-width: 200px;
            text-align: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .page-dots {
            display: flex;
            gap: 0.375rem;
        }

        .page-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(44, 36, 27, 0.15);
            cursor: pointer;
            transition: all 0.3s;
        }

        .page-dot.active {
            background: var(--seal-red);
            transform: scale(1.2);
        }

        .page-dot:hover:not(.active) {
            background: rgba(44, 36, 27, 0.3);
        }

        /* ===== ÁõÆÂΩïÊäΩÂ±â ===== */
        .toc-drawer {
            position: fixed;
            top: 0;
            left: 0;
            bottom: 0;
            width: 360px;
            max-width: 90vw;
            background: var(--paper);
            box-shadow: 5px 0 30px rgba(0,0,0,0.2);
            transform: translateX(-100%);
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 200;
            display: flex;
            flex-direction: column;
        }

        .toc-drawer.open {
            transform: translateX(0);
        }

        .toc-drawer-header {
            padding: 1.5rem;
            border-bottom: 1px solid rgba(44, 36, 27, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .toc-drawer-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--ink);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .toc-drawer-close {
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.5rem;
            color: var(--ink-light);
            transition: color 0.3s;
            border-radius: 4px;
        }

        .toc-drawer-close:hover {
            color: var(--ink);
            background: rgba(0,0,0,0.05);
        }

        .toc-drawer-list {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
        }

        .toc-drawer-item {
            display: flex;
            align-items: center;
            padding: 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 0.5rem;
            border: 1px solid transparent;
        }

        .toc-drawer-item:hover {
            background: rgba(185, 58, 50, 0.05);
            border-color: rgba(185, 58, 50, 0.2);
        }

        .toc-drawer-item.active {
            background: rgba(185, 58, 50, 0.1);
            border-color: var(--seal-red);
        }

        .toc-drawer-number {
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            background: rgba(185, 58, 50, 0.1);
            color: var(--seal-red);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 600;
            margin-right: 1rem;
        }

        .toc-drawer-info {
            flex: 1;
        }

        .toc-drawer-poem-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--ink);
            margin-bottom: 0.25rem;
        }

        .toc-drawer-author {
            font-size: 0.8125rem;
            color: var(--ink-light);
        }

        .toc-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.4);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
            z-index: 150;
        }

        .toc-overlay.open {
            opacity: 1;
            visibility: visible;
        }

        /* ===== Ê≥®ÈáäÈù¢ÊùøÊ®°ÊÄÅÊ°Ü ===== */
        .annotation-modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(44, 36, 27, 0.6);
            backdrop-filter: blur(4px);
            z-index: 300;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .annotation-modal-overlay.open {
            opacity: 1;
            visibility: visible;
        }

        .annotation-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            width: 90%;
            max-width: 600px;
            max-height: 85vh;
            background: var(--paper);
            border-radius: 12px;
            box-shadow: 0 25px 80px rgba(44, 36, 27, 0.3);
            z-index: 301;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .annotation-modal.open {
            opacity: 1;
            visibility: visible;
            transform: translate(-50%, -50%) scale(1);
        }

        .annotation-modal-header {
            padding: 1.5rem 2rem;
            border-bottom: 1px solid rgba(44, 36, 27, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(to bottom, var(--paper), var(--paper-dark));
        }

        .annotation-modal-title {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--ink);
        }

        .annotation-modal-title .material-symbols-outlined {
            color: var(--seal-red);
        }

        .annotation-modal-close {
            background: none;
            border: none;
            padding: 0.5rem;
            cursor: pointer;
            color: var(--ink-light);
            border-radius: 50%;
            transition: all 0.3s;
        }

        .annotation-modal-close:hover {
            background: rgba(0,0,0,0.05);
            color: var(--ink);
        }

        .annotation-modal-body {
            padding: 2rem;
            overflow-y: auto;
            flex: 1;
        }

        .annotation-modal-poem-info {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(44, 36, 27, 0.1);
        }

        .annotation-modal-poem-title {
            font-size: 1.5rem;
            font-weight: 900;
            color: var(--ink);
            letter-spacing: 0.1em;
        }

        .annotation-modal-poem-author {
            font-size: 1rem;
            color: var(--seal-red);
            font-weight: 500;
        }

        .annotation-modal-poem-time {
            font-size: 0.875rem;
            color: var(--ink-light);
            opacity: 0.7;
        }

        .annotation-modal-section {
            margin-bottom: 1.5rem;
        }

        .annotation-modal-section-title {
            font-size: 0.875rem;
            font-weight: 700;
            color: var(--seal-red);
            letter-spacing: 0.1em;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .annotation-modal-section-title::after {
            content: '';
            flex: 1;
            height: 1px;
            background: rgba(185, 58, 50, 0.2);
        }

        .annotation-modal-text {
            font-size: 1rem;
            line-height: 1.8;
            color: var(--ink-light);
        }

        .annotation-modal-notes {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .annotation-modal-note-item {
            padding: 0.75rem 1rem;
            background: rgba(44, 36, 27, 0.03);
            border-radius: 6px;
            border-left: 3px solid var(--seal-red);
            font-size: 0.9375rem;
            color: var(--ink-light);
            line-height: 1.6;
        }

        .annotation-modal-note-item strong {
            color: var(--ink);
            font-weight: 600;
        }

        /* ===== ÂìçÂ∫îÂºèËÆæËÆ° ===== */
        @media (max-width: 900px) {
            .book-wrapper {
                height: auto;
                max-height: none;
                margin-bottom: 5rem;
            }
            
            .page-spread {
                flex-direction: column;
            }
            
            .page {
                width: 100%;
                min-height: 50vh;
            }
            
            .annotation-page {
                padding-bottom: 6rem;
            }
            
            .annotation-card {
                max-height: 35vh;
                overflow-y: auto;
                -webkit-overflow-scrolling: touch;
                padding-bottom: 1rem;
            }
            
            .page-left {
                border-radius: 4px 4px 0 0;
                box-shadow: none;
                border-right: none;
                border-bottom: 1px solid rgba(44, 36, 27, 0.1);
            }
            
            .page-right {
                border-radius: 0 0 4px 4px;
                box-shadow: none;
                border-left: none;
            }
            
            .book-spine {
                display: none;
            }
            
            .poem-vertical-content {
                max-height: 250px;
            }
        }

        @media (max-width: 600px) {
            .header {
                padding: 0.75rem 1rem;
            }
            
            .logo-text {
                font-size: 1rem;
            }
            
            .page-navigation {
                padding: 0.5rem 1rem;
                gap: 1rem;
            }
            
            .page-nav-btn {
                width: 40px;
                height: 40px;
            }
            
            .page-indicator-title {
                font-size: 0.75rem;
                max-width: 120px;
            }
            
            .poem-page, .annotation-page {
                padding: 1.5rem;
            }
            
            .annotation-page {
                padding-bottom: 6rem;
            }
            
            .annotation-card {
                max-height: none;
                padding-bottom: 1.5rem;
            }
        }

        /* ===== ÁøªÈ°µÂä®Áîª ===== */
        @keyframes pageFlipRight {
            0% { transform: rotateY(0deg); }
            100% { transform: rotateY(-180deg); }
        }

        @keyframes pageFlipLeft {
            0% { transform: rotateY(-180deg); }
            100% { transform: rotateY(0deg); }
        }

        .flipping-right {
            animation: pageFlipRight 0.8s ease-in-out forwards;
            transform-origin: left center;
        }

        .flipping-left {
            animation: pageFlipLeft 0.8s ease-in-out forwards;
            transform-origin: left center;
        }

        /* ÈöêËóèÊªöÂä®Êù° */
        .toc-drawer-list::-webkit-scrollbar {
            width: 4px;
        }

        .toc-drawer-list::-webkit-scrollbar-track {
            background: transparent;
        }

        .toc-drawer-list::-webkit-scrollbar-thumb {
            background: rgba(44, 36, 27, 0.2);
            border-radius: 2px;
        }
    </style>
</head>
<body>
    <!-- È°∂ÈÉ®ÂØºËà™ -->
    <header class="header">
        <div class="logo" onclick="goToPage(0)">
            <div class="logo-icon">
                <span class="material-symbols-outlined">auto_stories</span>
            </div>
            <span class="logo-text">Êé¨ÊúàËØóÈõÜ</span>
        </div>
        <div class="nav-controls">
            <button class="nav-btn" onclick="toggleToc()">
                <span class="material-symbols-outlined">menu</span>
                <span>ÁõÆÂΩï</span>
            </button>
        </div>
    </header>

    <!-- ‰∏ªÂÆπÂô® -->
    <main class="main-container">
        <div class="book-wrapper">
            <div class="book">
                <div class="book-spine"></div>
                <div class="pages-container" id="pagesContainer">
                    <!-- È°µÈù¢Â∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
                </div>
            </div>
        </div>
    </main>

    <!-- ÁøªÈ°µÂØºËà™ -->
    <nav class="page-navigation">
        <button class="page-nav-btn" id="prevBtn" onclick="prevPage()">
            <span class="material-symbols-outlined">chevron_left</span>
        </button>
        <div class="page-indicator">
            <span class="page-indicator-title" id="pageTitle">Êé¨ÊúàËØóÈõÜ</span>
            <div class="page-dots" id="pageDots">
                <!-- ÂàÜÈ°µÁÇπÂ∞ÜÂä®ÊÄÅÁîüÊàê -->
            </div>
        </div>
        <button class="page-nav-btn" id="nextBtn" onclick="nextPage()">
            <span class="material-symbols-outlined">chevron_right</span>
        </button>
    </nav>

    <!-- Ê≥®ÈáäÈù¢ÊùøÊ®°ÊÄÅÊ°Ü -->
    <div class="annotation-modal-overlay" id="annotationOverlay" onclick="closeAnnotationModal()"></div>
    <div class="annotation-modal" id="annotationModal">
        <div class="annotation-modal-header">
            <h2 class="annotation-modal-title">
                <span class="material-symbols-outlined">menu_book</span>
                <span id="modalPoemTitle">ËØóËØçËØ¶Ëß£</span>
            </h2>
            <button class="annotation-modal-close" onclick="closeAnnotationModal()">
                <span class="material-symbols-outlined">close</span>
            </button>
        </div>
        <div class="annotation-modal-body" id="annotationModalBody">
            <!-- ÂÜÖÂÆπÂ∞ÜÂä®ÊÄÅÂ°´ÂÖÖ -->
        </div>
    </div>

    <!-- ÁõÆÂΩïÊäΩÂ±â -->
    <div class="toc-overlay" id="tocOverlay" onclick="toggleToc()"></div>
    <aside class="toc-drawer" id="tocDrawer">
        <div class="toc-drawer-header">
            <h2 class="toc-drawer-title">
                <span class="material-symbols-outlined">list</span>
                ÁõÆÂΩï
            </h2>
            <button class="toc-drawer-close" onclick="toggleToc()">
                <span class="material-symbols-outlined">close</span>
            </button>
        </div>
        <div class="toc-drawer-list" id="tocList">
            <!-- ÁõÆÂΩïÂàóË°®Â∞ÜÂä®ÊÄÅÁîüÊàê -->
        </div>
    </aside>

    <script>
        // ==========================================
        // üìö ËØóËØçÊï∞ÊçÆ - Âú®ËøôÈáåÊ∑ªÂä†/‰øÆÊîπ/Âà†Èô§ËØóËØç
        // ==========================================
        // Êï∞ÊçÆÊ†ºÂºèËØ¥ÊòéÔºö
        // id: ÁºñÂè∑ÔºàÈÄíÂ¢ûÔºâ
        // title: ËØóËØçÊ†áÈ¢ò
        // author: ‰ΩúËÄÖÂßìÂêç
        // createTime: Âàõ‰ΩúÊó∂Èó¥ÔºàÂèØÈÄâÔºâ
        // content: ËØóËØçÂÜÖÂÆπÔºàÊï∞ÁªÑÔºåÊØèÂè•/ÊØèÊÆµ‰∏Ä‰∏™ÂÖÉÁ¥†Ôºâ
        // interpretation: ‰ΩúËÄÖÂøÉËØ≠
        // notes: ËØçÂè•Ê≥®ÈáäÔºàÊï∞ÁªÑÔºâ
        // bgImage: ËÉåÊôØÂõæÁâáURLÔºàÂèØÈÄâÔºâ
        
        const poems = [
            {
                id: 1,
                title: "ÂÖ∞ÈôµÁéã¬∑Âá∫Â°û",
                author: "ÈòµÂçàËΩ¶",
                createTime: "2024Âπ¥8Êúà",
                content: [
                    "ÊóßÊó∂Êúà„ÄÇÁÖßÊü≥ÊõæÂ†™ÊèΩÁªì„ÄÇÂçÉ‰∏ùÊÄ®„ÄÅÂ∞òÊöóÁêêÁ™óÔºåÂà´ÂêéÊòéÂ¶ÉÈ¨ìÂ∫îÈõ™„ÄÇÊú±ÊââÂÜ∑‰ººÈìÅ„ÄÇËôöËÆæ„ÄÅÈì∂Â±èÁªõÈòô„ÄÇËé∫Êù•Êôö„ÄÅ‰∏çËßÅÊïÖ‰∫∫ÔºåÊÉüÂâ©ÂûÇÊù°Âº±Â¶ÇÂèë„ÄÇ",
                    "ÂáâÈ£ôÊç¢Êó∂ËäÇ„ÄÇÊ≠£ÁÄöÊµ∑ÁÉüÂÜ≤ÔºåÂ≠§ÈõÅËΩªÂà´„ÄÇÈúúÈ£éÂáÑÁ¥ßÊ¨∫Âº¶Âôé„ÄÇÈöèÊ∏êÂìçÁéØ‰Ω©ÔºåÂæÖÂΩíÈ≠ÇÈ≠ÑÔºåÁêµÁê∂ÂÅúËØ≠ÊÄ®È°øÊ≠á„ÄÇÊöÆ‰∫ëÂéãÂüéÂ†û„ÄÇ",
                    "ÊÉÖÂàá„ÄÇÂÖ±Ë∞ÅËØ¥ÔºüÂèàÈ©øÈ©¨ÈïøÂò∂ÔºåÈáëÊüùÂáâÂíΩ„ÄÇËæπÂ£∞ËÄøËÄø‰æµ‰∫∫Á´≠„ÄÇÊÄÖÂ°ûÂ§úËø¢ÈÄíÔºåÊºèÂ£∂Êª¥Áº∫„ÄÇÂÜ•Ëø∑ÈùíÂÜ¢ÔºåÊúâÁÉõÊ≥£„ÄÅÊ≥™Êú™Áªù„ÄÇ"
                ],
                interpretation: "Âàõ‰ΩúËÉåÊôØÊòØÈÄÅ‰∫∫Âá∫Â°û„ÄÇ‰ª•Âë®ÈÇ¶ÂΩ¶„ÄäÂÖ∞ÈôµÁéã¬∑Êü≥„ÄãË∞É‰∏∫Ê≠£‰ΩìÔºåÈ¢ÜÊ†ºÂ≠óÁöÜÁî®ÂéªÂ£∞ÔºåÊÉü„ÄåÈöè„ÄçÂ≠óÂπ≥Â£∞„ÄÇ‰ª•Êò≠ÂêõÂá∫Â°û‰∏∫ÊÉÖÊÑüÊ†∏ÂøÉÔºåËá¥Âäõ‰∫éÈÄöËøáÊó∂Á©∫‰∫§ÈîôÁöÑÊÑèË±°Áæ§ÊûÑÂª∫Âá∫ËãçÂáâÊÇ≤Â£ÆÁöÑËæπÂ°ûÁîªÂç∑„ÄÇÂÖ®ËØç‰ª•„ÄåÊóßÊó∂Êúà„ÄçËµ∑ÂÖ¥ÔºåÁû¨Èó¥ÊâìÈÄöÂéÜÂè≤Á∫µÊ∑±‚Äî‚ÄîÂçÉÂπ¥ÊòéÊúàÊõæÁÖßÊ±âÂÆ´ÊäòÊü≥Ôºå‰ªäÂèàÊò†ÁÖßÂ°ûÂ§ñÂ≠§ÂÜ¢ÔºåÂΩ¢ÊàêÂæ™ÁéØÂæÄÂ§çÁöÑÊó∂Á©∫Êº©Ê∂°„ÄÇËøêÁî®Â§öÈáçÊÑüÂÆòÁª¥Â∫¶ÔºöËßÜËßâ‰∏ä„ÄåÂ∞òÊöóÁêêÁ™ó„Äç„ÄåÊöÆ‰∫ëÂéãÂüéÂ†û„ÄçÁöÑÊô¶ÊöóËâ≤Ë∞ÉÔºåÂê¨Ëßâ‰∏≠„ÄåÂº¶Âôé„Äç„ÄåÈáëÊüùÂíΩ„ÄçÁöÑÊñ≠Áª≠ÊÇ≤Èü≥ÔºåËß¶ËßâÈáå„ÄåÊú±ÊââÂÜ∑‰ººÈìÅ„Äç„ÄåÈúúÈ£éÂáÑÁ¥ß„ÄçÁöÑÂà∫È™®ÂØíÊÑèÔºåÂÖ±ÂêåÁªáÂ∞±‰∫ÜË∑®Ë∂äÊó∂Á©∫ÁöÑËã¶ÈöæÊÑüÁü•ÁΩëÁªú„ÄÇ",
                notes: [
                    "ÊèΩÁªìÔºöÊåáÊäò‰∏ãÊü≥ÊûùÁî®Êù•ÁºñÁªì„ÄÇÊäòÊü≥ÊòØ‰∏ÄÁßçËµ∑Ê∫ê‰∫éÊ±â‰ª£ÁöÑÈÄÅÂà´‰π†‰øóÔºåÊäòÊü≥ÊûùÈÄÅÂà´Ôºå‰ª•Ë°®Ëææ‰æù‰æù‰∏çËàç‰πãÊÉÖ„ÄÇ",
                    "ÁêêÁ™óÔºöÈõïÂàªÊàñÁªòÊúâËøûÁéØÂΩ¢Ëä±Á∫πË£ÖÈ•∞ÊûÑ‰ª∂ÁöÑÁ™óÊà∑„ÄÇ",
                    "ÊòéÂ¶ÉÔºöÊåáÁéãÊò≠ÂêõÔºåÊôã‰ª£ÈÅøÂè∏È©¨Êò≠ÔºàÊñáÂ∏ùÔºâËÆ≥ÔºåÊîπÁß∞ÊòéÂêõÔºåÂêé‰∫∫Áß∞‰πã‰∏∫ÊòéÂ¶É„ÄÇ",
                    "Èì∂Â±èÁªõÈòôÔºöÂçéÁæéÁöÑÂ±èÈ£éÂíåÊú±Á∫¢ÁöÑÂÆ´Èó®„ÄÇÈì∂Â±èÔºåÂè§‰ª£ÂÆ∂Â±ÖÈôàËÆæ‰∏≠Èï∂ÂµåÈì∂Ë¥®Ë£ÖÈ•∞ÁöÑÂ±èÈ£é„ÄÇÁªõÈòôÔºåÊåáÂÆ´ÊÆøÂØ∫ËßÇÂâçÁöÑÊú±Ëâ≤Èó®Èòô„ÄÇ",
                    "ÂáâÈ£ôÔºöÁßãÈ£éÔºåÊúÄÊó©ËßÅ‰∫éÊ±â‰ª£Áè≠Â©ïÂ¶§„ÄäÊÄ®Ê≠åË°å„Äã„ÄåÂ∏∏ÊÅêÁßãËäÇËá≥ÔºåÂáâÈ£ôÂ§∫ÁÇéÁÉ≠„Äç",
                    "ÁÄöÊµ∑ÔºöÂéüÊåáÂåóÊñπÂ§ßÂûãÊπñÊ≥äÔºåÂêéÊºîÂèò‰∏∫ÊààÂ£ÅÊ≤ôÊº†ÁöÑ‰ª£Áß∞„ÄÇËøôÈáåÊåáÊ≤ôÊº†„ÄÇ",
                    "ÈúúÈ£éÂáÑÁ¥ßÊ¨∫Âº¶ÂôéÔºöÂØíÈ£éÂáÑÂéâÔºåËø´‰ΩøÁêµÁê∂Âº¶Â£∞ÈòªÂ°ûÂ¶ÇÂêåÂëúÂíΩ„ÄÇÂåñÁî®Êü≥Ê∞∏„ÄäÂÖ´Â£∞ÁîòÂ∑û„Äã„ÄåÊ∏êÈúúÈ£éÂáÑÁ¥ßÔºåÂÖ≥Ê≤≥ÂÜ∑ËêΩÔºåÊÆãÁÖßÂΩìÊ•º„Äç„ÄÇ",
                    "ÈöèÊ∏êÂìçÁéØ‰Ω©ÔºåÂæÖÂΩíÈ≠ÇÈ≠ÑÔºöÂåñÁî®ÊùúÁî´„ÄäÂíèÊÄÄÂè§Ëøπ¬∑ÂÖ∂‰∏â„Äã„ÄåÁîªÂõæÁúÅËØÜÊò•È£éÈù¢ÔºåÁéØ‰Ω©Á©∫ÂΩíÂ§úÊúàÈ≠Ç„Äç„ÄÇÊåáËøúÂú®ÊïÖÂõΩÁöÑ‰∫∫‰ª¨Âê¨Âà∞ÁéØ‰Ω©Â£∞ÈÄêÊ∏êÂìçËµ∑‚Äî‚ÄîÊò≠ÂêõÁöÑÈ≠ÇÈ≠ÑÊ≠£‰ªéÂ°ûÂ§ñÂΩíÊù•„ÄÇ",
                    "È°øÔºöÂøΩÁÑ∂„ÄÇ",
                    "ÂüéÂ†ûÔºöÊåáÂüéÂ¢ô‰∏äÊ≤øÁöÑÈΩøÁä∂ÁüÆÂ¢ôÁªìÊûÑ„ÄÇ",
                    "È©øÈ©¨ÔºöÂè§‰ª£ÂÆòÊñπËÆæÁΩÆÁöÑÈ©øÁ´ô‰∏ìÁî®ÁöÑÈ©¨Âåπ„ÄÇ",
                    "ÈáëÊüùÔºöÂà´ÂêçÂàÅÊñóÔºåÂè§‰ª£ÂÜõ‰∏≠‰ΩøÁî®ÁöÑÈáëÂ±ûÂô®ÂÖ∑ÔºåÂÖºÂÖ∑ÁÇäÁÖÆ‰∏éÊä•Êó∂ÂäüËÉΩ„ÄÇ‰∏âË∂≥‰∏ÄÊüÑÔºåÁôΩÂ§©ÁÇäÁÖÆÔºåÂ§úÈó¥Êï≤ÂáªÂ∑°Êõ¥Êä•Êó∂„ÄÇ",
                    "ËÄøËÄøÔºöÂéüÊåáÂøÉ‰∏≠ÊåÇÊÄÄ„ÄÅÁÉ¶Ë∫Å‰∏çÂÆâ‰πãÊÄÅÔºåËøôÈáåÊåáËæπÂ°û‰πãÂ£∞ÊùÇ‰π±ËÄåÊÇ≤Êàö„ÄÇ",
                    "Ëø¢ÈÄíÔºöÊú¨‰πâÂΩ¢ÂÆπÈÅ•Ëøú‰πãË≤åÔºåËøôÈáåÂΩ¢ÂÆπÂ°ûÂ§ñÂ§úËâ≤Êó†ËæπÊó†ÈôÖ„ÄÇ",
                    "ÊºèÂ£∂Êª¥Áº∫ÔºöÊºèÂ£∂‰∏≠ÁöÑÊ∞¥Êª¥‰ªø‰ΩõË¶ÅÂ∞ÜÂ£∂Â∫ïÊª¥Á©øÔºåÂΩ¢ÂÆπÂ§úÁöÑÊº´Èïø„ÄÇÊºèÂ£∂ÊòØÂè§‰ª£ËÆ°Êó∂Âô®ÂÖ∑„ÄÇ",
                    "ÂÜ•Ëø∑ÈùíÂÜ¢ÔºöÂÜ•Ëø∑ÔºåÊ®°Á≥ä‰∏çÊ∏Ö„ÄÅËø∑ËíôËø∑Ëå´„ÄÇÈùíÂÜ¢ÔºåÊò≠ÂêõÂ¢ìÔºåÁõ∏‰º†ÂåóÂú∞ËçâÁöÜÁôΩÔºåÊÉüÁã¨Êò≠ÂêõÂ¢ì‰∏äËçâÈùíÔºåÊïÖÂêçÈùíÂÜ¢„ÄÇ"
                ],
                bgImage: "https://images.unsplash.com/photo-1509316785289-025f5b846b35?w=800"
            },
            {
                id: 2,
                title: "Êò•Êó•ÂÅ∂ÊÑü",
                author: "Â∞èÁ∫¢",
                content: ["Êò•È£éÊãÇÈù¢Êù•", "Ê°ÉËä±Ê¨°Á¨¨ÂºÄ", "Â∞ëÂπ¥ÂøÉ‰∫ãÈáç", "Áã¨ÂÄöÊ†èÊùÜÂëÜ"],
                interpretation: "ËØó‰∫∫Âú®Êò•Êó•ÈáåÊúâÊÑüËÄåÂèëÔºåÂÄüÊò•È£é„ÄÅÊ°ÉËä±Á≠âÊÑèË±°ÔºåÊäíÂèëÈùíÊò•Âπ¥Â∞ëÊó∂ÁöÑÂøÉ‰∫ã‰∏éËø∑Ëå´„ÄÇÊú´Âè•„ÄåÁã¨ÂÄöÊ†èÊùÜÂëÜ„ÄçÁîüÂä®ÊèèÁªò‰∫ÜÂ∞ëÂπ¥Ê≤âÊÄùÁöÑÂßøÊÄÅ„ÄÇ",
                notes: [
                    "Êò•È£éÊãÇÈù¢ÔºöÊò•Â§©ÁöÑÂæÆÈ£éËΩªËΩªÂêπËøáËÑ∏Â∫û",
                    "Ê¨°Á¨¨ÂºÄÔºö‰æùÊ¨°ÂºÄÊîæ",
                    "ÂøÉ‰∫ãÈáçÔºöÂøÉ‰∏≠ÊúâÂæàÂ§öÁÉ¶ÊÅºÊàñÊÄùËôë",
                    "Áã¨ÂÄöÊ†èÊùÜÔºöÁã¨Ëá™Èù†Âú®Ê†èÊùÜ‰∏ä"
                ],
                bgImage: "https://images.unsplash.com/photo-1462275646964-a0e3386b89fa?w=800"
            },
            {
                id: 3,
                title: "Â§úËØªÊúâÊÑü",
                author: "ÈòøÂçé",
                content: ["ÁÅØÁÅ´ÈòëÁèäÂ§Ñ", "‰π¶È¶ô‰º¥Â§úÈïø", "Âè§‰∫∫‰ªä‰∫∫‰∫ã", "Â∞ΩÂú®Â≠óÈáåËóè"],
                interpretation: "ËøôÈ¶ñËØóÊèèÂÜô‰∫ÜÊ∑±Â§úËØª‰π¶ÁöÑÊÉÖÊôØ„ÄÇÁÅØÁÅ´ÂæÆÂº±Ôºå‰π¶È¶ôËê¶ÁªïÔºåËØó‰∫∫Âú®ÈòÖËØª‰∏≠ÊÑüÂèóÂà∞Âè§‰ªä‰πã‰∫ãÁöÜËï¥Ëóè‰∫éÂ≠óÈáåË°åÈó¥ÔºåË°®Ëææ‰∫ÜÂØπËØª‰π¶ÁöÑÁÉ≠Áà±ÂíåÊÑüÊÇü„ÄÇ",
                notes: [
                    "ÁÅØÁÅ´ÈòëÁèäÔºöÁÅØÂÖâÂ∞ÜÂ∞ΩÔºåÊåáÊ∑±Â§úÊó∂ÂàÜ",
                    "‰π¶È¶ôÔºö‰π¶Á±çÁöÑÂ¢®È¶ôÔºå‰πüÊåáËØª‰π¶ÁöÑÊ∞õÂõ¥",
                    "Âè§‰∫∫‰ªä‰∫∫‰∫ãÔºöÂè§‰ª£ÂíåÁé∞‰ª£ÁöÑ‰∫∫Âíå‰∫ã",
                    "Â≠óÈáåËóèÔºöÈöêËóèÂú®ÊñáÂ≠ó‰πã‰∏≠"
                ],
                bgImage: "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=800"
            },
            {
                id: 4,
                title: "ÈÄÅÂà´",
                author: "Â∞èÊùé",
                content: ["Èïø‰∫≠Âè§ÈÅìËæπ", "Ëä≥ËçâËøûÂ§©Ëøú", "Ê≠§ÂéªÁªèÂπ¥Âêé", "‰ΩïÊó∂ÂÜçÁõ∏ËßÅ"],
                interpretation: "ËøôÊòØ‰∏ÄÈ¶ñÈÄÅÂà´ËØóÔºåÂÄüÁî®ÁªèÂÖ∏ÁöÑÈÄÅÂà´ÊÑèË±°‚Äî‚ÄîÈïø‰∫≠„ÄÅÂè§ÈÅì„ÄÅËä≥ËçâÔºåË°®ËææÁ¶ªÂà´Êó∂ÁöÑ‰∏çËàç‰∏éÂØπÈáçÈÄ¢ÁöÑÊúüÁõº„ÄÇËØ≠Ë®ÄÁÆÄÊ¥ÅËÄåÊÉÖÊÑüÁúüÊåö„ÄÇ",
                notes: [
                    "Èïø‰∫≠ÔºöÂè§Êó∂ËÆæÂú®Ë∑ØÊóÅ‰æõË°å‰∫∫‰ºëÊÅØÁöÑ‰∫≠Â≠êÔºåÂ∏∏‰ΩúÈÄÅÂà´‰πãÂ§Ñ",
                    "Âè§ÈÅìÔºöÂè§ËÄÅÁöÑÈÅìË∑Ø",
                    "Ëä≥ËçâËøûÂ§©ÔºöËä≥ËçâÂª∂‰º∏Âà∞Â§©Ëæπ",
                    "ÁªèÂπ¥ÔºöËøá‰∫Ü‰∏ÄÂπ¥ÔºåÊåáÊó∂Èó¥Èïø‰πÖ"
                ],
                bgImage: "https://images.unsplash.com/photo-1490750967868-88aa4486c946?w=800"
            },
            {
                id: 5,
                title: "Ê†°Âõ≠Êô®Êõ≤",
                author: "Â∞èÁéã",
                content: ["Êô®ÂÖâÁÖß‰π¶Ê•º", "ÁêÖÁêÖËØª‰π¶Â£∞", "Â∞ëÂπ¥ÂøóÊ∞îÈ´ò", "ÂâçË∑Ø‰ªªÈ©∞È™ã"],
                interpretation: "ËØó‰∫∫ÊèèÁªò‰∫ÜÊ†°Âõ≠Ê∏ÖÊô®ÁöÑÁæéÂ•ΩÊôØË±°„ÄÇÈò≥ÂÖâÁÖßËÄÄÁùÄÊïôÂ≠¶Ê•ºÔºåÊúóÊúóÁöÑËØª‰π¶Â£∞ÂõûËç°ÂÖ∂‰∏≠ÔºåÂ±ïÁé∞‰∫ÜËéòËéòÂ≠¶Â≠êÁöÑËì¨ÂãÉÊúùÊ∞îÂíåËøúÂ§ßÂøóÂêë„ÄÇ",
                notes: [
                    "Êô®ÂÖâÔºöÊó©Êô®ÁöÑÈò≥ÂÖâ",
                    "ÁêÖÁêÖÔºöÂΩ¢ÂÆπËØª‰π¶Â£∞Ê∏ÖÊúóÂìç‰∫Æ",
                    "ÂøóÊ∞îÈ´òÔºöÂøóÂêëËøúÂ§ßÔºåÊÑèÊ∞îÈ£éÂèë",
                    "‰ªªÈ©∞È™ãÔºöËá™Áî±Â•îÈ©∞ÔºåÊØîÂñªÊñΩÂ±ïÊä±Ë¥ü"
                ],
                bgImage: "https://images.unsplash.com/photo-1500382017468-9049fed747ef?w=800"
            },
            {
                id: 6,
                title: "ÂÜ¨Â§ú",
                author: "Â∞èÂº†",
                content: ["Á™óÂ§ñÈõ™Á∫∑È£û", "ÁÇâËæπËå∂Ê≠£ÁÖÆ", "Èó≤ÁøªÊóßÊó•ËÆ∞", "ÂæÄ‰∫ãÂ¶ÇÁÉüÂéª"],
                interpretation: "ËøôÈ¶ñËØóÊèèÁªò‰∫Ü‰∏Ä‰∏™Ê∏©È¶®ÁöÑÂÜ¨Â§úÂú∫ÊôØ„ÄÇÁ™óÂ§ñÂ§ßÈõ™Á∫∑È£ûÔºåÂÆ§ÂÜÖÁÇâÁÅ´Ê∏©ÊöñÔºåËØó‰∫∫Âú®ÁÖÆËå∂ÂìÅËåó‰πãÈôÖÁøªÈòÖÊóßÊó•ËÆ∞ÔºåÂæÄ‰∫ãÂ¶ÇÁÉüËà¨ÊµÆÁé∞ÂèàÊ∂àÊï£ÔºåÂÖÖÊª°‰∫ÜÊÄÄÊóßÁöÑÊÉÖÊÑ´„ÄÇ",
                notes: [
                    "Èõ™Á∫∑È£ûÔºöÈõ™Ëä±Á∫∑Á∫∑Êâ¨Êâ¨Âú∞È£òËêΩ",
                    "ÁÇâËæπÔºöÁÅ´ÁÇâÊóÅËæπ",
                    "Èó≤ÁøªÔºöÊÇ†Èó≤Âú∞ÁøªÈòÖ",
                    "ÂæÄ‰∫ãÂ¶ÇÁÉüÔºöËøáÂéªÁöÑ‰∫ãÊÉÖÂÉèÁÉüÈõæ‰∏ÄÊ†∑È£òÊï£"
                ],
                bgImage: "https://images.unsplash.com/photo-1491002052546-bf38f186af56?w=800"
            },
            {
                id: 7,
                title: "Ëá¥Âèã‰∫∫",
                author: "Â∞èÈôà",
                content: ["Áõ∏ËØÜÂú®Â∞ëÂπ¥", "ÂÖ±Â∫¶Â•ΩÊó∂ÂÖâ", "Á∫µÁÑ∂ÂêÑÂ§©Ê∂Ø", "ÂèãÊÉÖÊ∞∏‰∏çÂøò"],
                interpretation: "ËøôÊòØ‰∏ÄÈ¶ñËµ†ÂèãËØóÔºåÂõûÂøÜ‰∫Ü‰∏éÂèã‰∫∫Áõ∏ËØÜ‰∫éÂ∞ëÂπ¥Êó∂‰ª£ÔºåÂÖ±ÂêåÂ∫¶ËøáÁöÑÁæéÂ•ΩÊó∂ÂÖâ„ÄÇÂç≥‰ΩøÊó•ÂêéÂ§©ÂêÑ‰∏ÄÊñπÔºåÂèãÊÉÖ‰πüÊ∞∏ËøúÈì≠ËÆ∞‰∫éÂøÉ„ÄÇËØ≠Ë®ÄÊú¥ÂÆûÔºåÊÉÖÊÑüÁúüÊåö„ÄÇ",
                notes: [
                    "Áõ∏ËØÜÔºö‰∫íÁõ∏ËÆ§ËØÜ",
                    "Â∞ëÂπ¥ÔºöÂπ¥Â∞ëÁöÑÊó∂ÂÄô",
                    "Â•ΩÊó∂ÂÖâÔºöÁæéÂ•ΩÁöÑÊó∂ÂÖâ",
                    "ÂêÑÂ§©Ê∂ØÔºöÂàÜÂà´Âú®Â§©Ê∂ØÊµ∑ËßíÔºåÂΩ¢ÂÆπÁõ∏Ë∑ùÈÅ•Ëøú"
                ],
                bgImage: "https://images.unsplash.com/photo-1444464666168-49d633b86797?w=800"
            },
            {
                id: 8,
                title: "ÁôªÈ´òÊúõËøú",
                author: "Â∞èÂàò",
                content: ["Áã¨‰∏äÈ´òÊ•ºÊúõ", "‰∫ëÂ±±Â±ÇÂ±ÇÂè†", "ÂøÉÈöèÁôΩ‰∫ëÈ£û", "ÂøóÂú®ÂçÉÈáåÂ§ñ"],
                interpretation: "ËØó‰∫∫Áã¨Ëá™Áôª‰∏äÈ´òÊ•ºËøúÁú∫ÔºåÁúãÂà∞Áæ§Â±±Â±ÇÂè†„ÄÅÁôΩ‰∫ëÈ£òÈ£ûÁöÑÂ£ÆÈòîÊôØË±°ÔºåÂøÉÈöèÁôΩ‰∫ëÈ£ûÂêëËøúÊñπÔºåË°®Ëææ‰∫ÜÂØπÊú™Êù•ÁöÑÊÜßÊÜ¨ÂíåËøúÂ§ßÁöÑÂøóÂêë„ÄÇ",
                notes: [
                    "Áã¨‰∏äÔºöÁã¨Ëá™Áôª‰∏ä",
                    "‰∫ëÂ±±Â±ÇÂ±ÇÂè†Ôºö‰∫ëÈõæÁº≠ÁªïÁöÑÂ±±Â≥¶Â±ÇÂ±ÇÂè†Âè†",
                    "ÂøÉÈöèÁôΩ‰∫ëÈ£ûÔºöÂøÉÁª™ÈöèÁùÄÁôΩ‰∫ëÈ£òÂêëËøúÊñπ",
                    "ÂøóÂú®ÂçÉÈáåÂ§ñÔºöÂøóÂêëÂú®ÂçÉÈáå‰πãÂ§ñÔºåÂΩ¢ÂÆπÊä±Ë¥üËøúÂ§ß"
                ],
                bgImage: "https://images.unsplash.com/photo-1432405972618-c60b0225b8f9?w=800"
            }
        ];

        // ==========================================
        // üéÆ È°µÈù¢ÊéßÂà∂ÈÄªËæë
        // ==========================================
        let currentPage = 0; // 0 = Â∞ÅÈù¢, 1+ = ËØóËØçÈ°µÈù¢
        const totalPages = poems.length + 1; // Â∞ÅÈù¢ + ËØóËØçÊï∞Èáè

        // ÂàùÂßãÂåñÈ°µÈù¢
        function initPages() {
            const container = document.getElementById('pagesContainer');
            container.innerHTML = '';

            // ÂàõÂª∫Â∞ÅÈù¢È°µ
            const coverSpread = createCoverSpread();
            container.appendChild(coverSpread);

            // ÂàõÂª∫ËØóËØçÈ°µÈù¢
            poems.forEach((poem, index) => {
                const poemSpread = createPoemSpread(poem, index);
                container.appendChild(poemSpread);
            });

            // ÂàùÂßãÂåñÂàÜÈ°µÁÇπ
            initPageDots();

            // ÂàùÂßãÂåñÁõÆÂΩï
            initToc();

            // Êõ¥Êñ∞ÊòæÁ§∫
            updatePageDisplay();
        }

        // ÂàõÂª∫Â∞ÅÈù¢È°µ
        function createCoverSpread() {
            const spread = document.createElement('div');
            spread.className = 'page-spread';
            spread.innerHTML = `
                <div class="page page-left cover-page">
                    <div class="cover-decoration" style="background-image: url('https://images.unsplash.com/photo-1513836279014-a89f7a76ae86?w=800');"></div>
                    <div class="cover-title-vertical">
                        <h1 class="cover-main-title">Êé¨ÊúàËØóÈõÜ</h1>
                        <div class="cover-subtitle">Á¨¨‰∏ÄÂç∑ ¬∑ Âèã‰∫∫ËØóÈÄâ</div>
                    </div>
                    <div class="cover-seal">
                        <span>Êé¨</span>
                        <span>Êúà</span>
                        <span>ËØó</span>
                        <span>Á§æ</span>
                    </div>
                </div>
                <div class="page page-right toc-page">
                    <h2 class="toc-title">
                        <span class="material-symbols-outlined">list</span>
                        ÁõÆ ÂΩï
                    </h2>
                    <div class="toc-list">
                        ${poems.map((poem, i) => `
                            <div class="toc-item" onclick="goToPage(${i + 1})">
                                <span class="toc-number">${String(i + 1).padStart(2, '0')}</span>
                                <span class="toc-poem-title">${poem.title}</span>
                                <span class="toc-author">${poem.author}</span>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            return spread;
        }

        // ÂàõÂª∫ËØóËØçÈ°µÈù¢
        function createPoemSpread(poem, index) {
            const spread = document.createElement('div');
            spread.className = 'page-spread';
            spread.innerHTML = `
                <div class="page page-left poem-page">
                    <div class="poem-content-area">
                        <div class="poem-vertical-content">
                            <div class="poem-title-block">
                                <h2 class="poem-title">${poem.title}</h2>
                                <span class="poem-author">${poem.author}</span>
                                ${poem.createTime ? `<span class="poem-time">${poem.createTime}</span>` : ''}
                            </div>
                            <div class="poem-lines">
                                ${poem.content.map(line => `<p class="poem-line">${line}</p>`).join('')}
                            </div>
                        </div>
                    </div>
                    <div class="page-number page-number-left">
                        <span>${String((index + 1) * 2).padStart(2, '0')}</span>
                    </div>
                </div>
                <div class="page page-right annotation-page">
                    <div class="annotation-bg-image" style="background-image: url('${poem.bgImage}');"></div>
                    <div class="annotation-content">
                        <div class="annotation-card">
                            <div class="annotation-card-header">
                                <h3 class="annotation-card-title">
                                    <span class="material-symbols-outlined">auto_awesome</span>
                                    ‰ΩúËÄÖÂøÉËØ≠
                                </h3>
                                <div class="annotation-card-actions">
                                    <button title="ÊúóËØª"><span class="material-symbols-outlined">headphones</span></button>
                                    <button title="Êî∂Ëóè"><span class="material-symbols-outlined">bookmark</span></button>
                                    <button title="Ê∑±ÂÖ•Êé¢Á¥¢" class="explore-icon-btn" onclick="openAnnotationModal(${index})"><span class="material-symbols-outlined">open_in_new</span></button>
                                </div>
                            </div>
                            <p class="annotation-text">${poem.interpretation}</p>
                            <div class="annotation-section">
                                <h4 class="annotation-section-title">ËØçÂè•Ê≥®Èáä</h4>
                                <div class="annotation-notes">
                                    ${poem.notes.slice(0, 3).map(note => `<div class="annotation-note-item">${note}</div>`).join('')}
                                    ${poem.notes.length > 3 ? `<div class="annotation-note-more">...ÂÖ±${poem.notes.length}Êù°Ê≥®ÈáäÔºåÁÇπÂáª‰∏ãÊñπÊü•ÁúãÂÖ®ÈÉ®</div>` : ''}
                                </div>
                            </div>
                            <div class="annotation-footer">
                                <span class="annotation-footer-link">Êé¨ÊúàËØóÁ§æ</span>
                                <div class="annotation-explore-btn" onclick="openAnnotationModal(${index})">
                                    <span>Ê∑±ÂÖ•Êé¢Á¥¢</span>
                                    <span class="material-symbols-outlined">arrow_right_alt</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="page-number page-number-right">
                        <span>${String((index + 1) * 2 + 1).padStart(2, '0')}</span>
                    </div>
                </div>
            `;
            return spread;
        }

        // ÂàùÂßãÂåñÂàÜÈ°µÁÇπ
        function initPageDots() {
            const dotsContainer = document.getElementById('pageDots');
            dotsContainer.innerHTML = '';
            
            // Âè™ÊòæÁ§∫ÊúÄÂ§ö7‰∏™ÁÇπ
            const maxDots = Math.min(totalPages, 7);
            for (let i = 0; i < maxDots; i++) {
                const dot = document.createElement('div');
                dot.className = 'page-dot';
                dot.onclick = () => goToPage(i);
                dotsContainer.appendChild(dot);
            }
        }

        // ÂàùÂßãÂåñÁõÆÂΩï
        function initToc() {
            const tocList = document.getElementById('tocList');
            tocList.innerHTML = `
                <div class="toc-drawer-item ${currentPage === 0 ? 'active' : ''}" onclick="goToPage(0); toggleToc();">
                    <div class="toc-drawer-number">Â∞Å</div>
                    <div class="toc-drawer-info">
                        <div class="toc-drawer-poem-title">Â∞ÅÈù¢ & ÁõÆÂΩï</div>
                        <div class="toc-drawer-author">Êé¨ÊúàËØóÈõÜ</div>
                    </div>
                </div>
                ${poems.map((poem, i) => `
                    <div class="toc-drawer-item ${currentPage === i + 1 ? 'active' : ''}" onclick="goToPage(${i + 1}); toggleToc();">
                        <div class="toc-drawer-number">${String(i + 1).padStart(2, '0')}</div>
                        <div class="toc-drawer-info">
                            <div class="toc-drawer-poem-title">${poem.title}</div>
                            <div class="toc-drawer-author">${poem.author}</div>
                        </div>
                    </div>
                `).join('')}
            `;
        }

        // Êõ¥Êñ∞È°µÈù¢ÊòæÁ§∫
        function updatePageDisplay() {
            const spreads = document.querySelectorAll('.page-spread');
            spreads.forEach((spread, index) => {
                spread.classList.remove('active', 'flipped');
                if (index === currentPage) {
                    spread.classList.add('active');
                } else if (index < currentPage) {
                    spread.classList.add('flipped');
                }
                spread.style.zIndex = index === currentPage ? 10 : totalPages - index;
            });

            // Êõ¥Êñ∞Ê†áÈ¢ò
            const titleEl = document.getElementById('pageTitle');
            if (currentPage === 0) {
                titleEl.textContent = 'Êé¨ÊúàËØóÈõÜ';
            } else {
                titleEl.textContent = poems[currentPage - 1].title;
            }

            // Êõ¥Êñ∞ÂàÜÈ°µÁÇπ
            const dots = document.querySelectorAll('.page-dot');
            dots.forEach((dot, index) => {
                dot.classList.toggle('active', index === currentPage);
            });

            // Êõ¥Êñ∞ÊåâÈíÆÁä∂ÊÄÅ
            document.getElementById('prevBtn').disabled = currentPage === 0;
            document.getElementById('nextBtn').disabled = currentPage === totalPages - 1;

            // Êõ¥Êñ∞ÁõÆÂΩïÈ´ò‰∫Æ
            const tocItems = document.querySelectorAll('.toc-drawer-item');
            tocItems.forEach((item, index) => {
                item.classList.toggle('active', index === currentPage);
            });
        }

        // ÁøªÂà∞‰∏ã‰∏ÄÈ°µ
        function nextPage() {
            if (currentPage < totalPages - 1) {
                currentPage++;
                updatePageDisplay();
            }
        }

        // ÁøªÂà∞‰∏ä‰∏ÄÈ°µ
        function prevPage() {
            if (currentPage > 0) {
                currentPage--;
                updatePageDisplay();
            }
        }

        // Ë∑≥ËΩ¨Âà∞ÊåáÂÆöÈ°µ
        function goToPage(pageIndex) {
            if (pageIndex >= 0 && pageIndex < totalPages) {
                currentPage = pageIndex;
                updatePageDisplay();
            }
        }

        // ÂàáÊç¢ÁõÆÂΩï
        function toggleToc() {
            const drawer = document.getElementById('tocDrawer');
            const overlay = document.getElementById('tocOverlay');
            drawer.classList.toggle('open');
            overlay.classList.toggle('open');
        }

        // ÊâìÂºÄÊ≥®ÈáäÈù¢Êùø
        function openAnnotationModal(poemIndex) {
            const poem = poems[poemIndex];
            if (!poem) return;

            const modal = document.getElementById('annotationModal');
            const overlay = document.getElementById('annotationOverlay');
            const titleEl = document.getElementById('modalPoemTitle');
            const bodyEl = document.getElementById('annotationModalBody');

            titleEl.textContent = poem.title + ' - ËØ¶Ëß£';

            bodyEl.innerHTML = `
                <div class="annotation-modal-poem-info">
                    <span class="annotation-modal-poem-title">${poem.title}</span>
                    <span class="annotation-modal-poem-author">${poem.author}</span>
                    ${poem.createTime ? `<span class="annotation-modal-poem-time">${poem.createTime}</span>` : ''}
                </div>
                
                <div class="annotation-modal-section">
                    <h3 class="annotation-modal-section-title">ÂéüÊñá</h3>
                    <div class="annotation-modal-text" style="text-align: center; font-size: 1.125rem; letter-spacing: 0.1em;">
                        ${poem.content.map(line => `<p style="margin-bottom: 0.5rem;">${line}</p>`).join('')}
                    </div>
                </div>
                
                <div class="annotation-modal-section">
                    <h3 class="annotation-modal-section-title">‰ΩúËÄÖÂøÉËØ≠</h3>
                    <p class="annotation-modal-text">${poem.interpretation}</p>
                </div>
                
                <div class="annotation-modal-section">
                    <h3 class="annotation-modal-section-title">ËØçÂè•Ê≥®Èáä</h3>
                    <div class="annotation-modal-notes">
                        ${poem.notes.map(note => `<div class="annotation-modal-note-item">${note}</div>`).join('')}
                    </div>
                </div>
            `;

            modal.classList.add('open');
            overlay.classList.add('open');
            document.body.style.overflow = 'hidden';
        }

        // ÂÖ≥Èó≠Ê≥®ÈáäÈù¢Êùø
        function closeAnnotationModal() {
            const modal = document.getElementById('annotationModal');
            const overlay = document.getElementById('annotationOverlay');
            modal.classList.remove('open');
            overlay.classList.remove('open');
            document.body.style.overflow = '';
        }

        // ÈîÆÁõòÂØºËà™
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight' || e.key === 'ArrowDown') {
                nextPage();
            } else if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') {
                prevPage();
            } else if (e.key === 'Escape') {
                const drawer = document.getElementById('tocDrawer');
                const modal = document.getElementById('annotationModal');
                if (modal.classList.contains('open')) {
                    closeAnnotationModal();
                } else if (drawer.classList.contains('open')) {
                    toggleToc();
                }
            }
        });

        // Ëß¶Êë∏ÊªëÂä®ÊîØÊåÅ
        let touchStartX = 0;
        let touchEndX = 0;

        document.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
        });

        document.addEventListener('touchend', (e) => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });

        function handleSwipe() {
            const swipeThreshold = 50;
            const diff = touchStartX - touchEndX;
            
            if (Math.abs(diff) > swipeThreshold) {
                if (diff > 0) {
                    nextPage(); // Â∑¶ÊªëÁøª‰∏ã‰∏ÄÈ°µ
                } else {
                    prevPage(); // Âè≥ÊªëÁøª‰∏ä‰∏ÄÈ°µ
                }
            }
        }

        // ÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', initPages);
    </script>
</body>
</html>
